{"ast":null,"code":"import axios from \"axios\";\nimport { isValid } from \"./API\";\nconst backendURL = \"http://localhost:8080/api\";\nlet userinfo = {};\nexport async function logoutUser() {\n  console.log(\"LOGOUT CALLED\");\n  sessionStorage.setItem(\"LoggedIn\", \"false\");\n  axios.get(backendURL + \"/logout\", {\n    withCredentials: true\n  }).then(response => {\n    userinfo = {};\n    console.log(response);\n  });\n}\nexport function getUserDetails(callback) {\n  if (isLoggedIn()) {\n    //localStorage.setItem(\"LoggedIn\", true);\n    callback(userinfo);\n    return;\n  }\n\n  console.log(\"OOF\");\n  axios.get(backendURL + \"/userinfo\", {\n    withCredentials: true\n  }).then(response => {\n    if (!isValid(response)) logoutUser();else {\n      sessionStorage.setItem(\"LoggedIn\", \"true\");\n      userinfo = response.data;\n      console.log(\"MADE A SUCCESSFUL LOGIN\");\n    }\n    callback(userinfo);\n  });\n}\nexport function isLoggedIn() {\n  //return false;\n  console.log(sessionStorage.getItem(\"LoggedIn\"));\n  return sessionStorage.getItem(\"LoggedIn\") === \"true\"; // axios\n  //   .get(backendURL + \"/loggedinstatus\", { withCredentials: true })\n  //   .then((promise) => {\n  //     console.log(promise);\n  //     if (promise.data === \"x\") callback(1);\n  //     else callback(2);\n  //   })\n  //   .catch((Error) => {\n  //     console.log(Error);\n  //   });\n  // //return loggedInStatus;\n}","map":{"version":3,"sources":["/Users/rajobasu/Desktop/react_tut/src/APICalls/LoginHandler.js"],"names":["axios","isValid","backendURL","userinfo","logoutUser","console","log","sessionStorage","setItem","get","withCredentials","then","response","getUserDetails","callback","isLoggedIn","data","getItem"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,OAAxB;AAEA,MAAMC,UAAU,GAAG,2BAAnB;AAEA,IAAIC,QAAQ,GAAG,EAAf;AAEA,OAAO,eAAeC,UAAf,GAA4B;AACjCC,EAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACAC,EAAAA,cAAc,CAACC,OAAf,CAAuB,UAAvB,EAAmC,OAAnC;AACAR,EAAAA,KAAK,CACFS,GADH,CACOP,UAAU,GAAG,SADpB,EAC+B;AAAEQ,IAAAA,eAAe,EAAE;AAAnB,GAD/B,EAEGC,IAFH,CAESC,QAAD,IAAc;AAClBT,IAAAA,QAAQ,GAAG,EAAX;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAYM,QAAZ;AACD,GALH;AAMD;AAED,OAAO,SAASC,cAAT,CAAwBC,QAAxB,EAAkC;AACvC,MAAIC,UAAU,EAAd,EAAkB;AAChB;AACAD,IAAAA,QAAQ,CAACX,QAAD,CAAR;AACA;AACD;;AACDE,EAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACAN,EAAAA,KAAK,CACFS,GADH,CACOP,UAAU,GAAG,WADpB,EACiC;AAAEQ,IAAAA,eAAe,EAAE;AAAnB,GADjC,EAEGC,IAFH,CAESC,QAAD,IAAc;AAClB,QAAI,CAACX,OAAO,CAACW,QAAD,CAAZ,EAAwBR,UAAU,GAAlC,KACK;AACHG,MAAAA,cAAc,CAACC,OAAf,CAAuB,UAAvB,EAAmC,MAAnC;AACAL,MAAAA,QAAQ,GAAGS,QAAQ,CAACI,IAApB;AACAX,MAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACD;AAEDQ,IAAAA,QAAQ,CAACX,QAAD,CAAR;AACD,GAXH;AAYD;AAED,OAAO,SAASY,UAAT,GAAsB;AAC3B;AACAV,EAAAA,OAAO,CAACC,GAAR,CAAYC,cAAc,CAACU,OAAf,CAAuB,UAAvB,CAAZ;AACA,SAAOV,cAAc,CAACU,OAAf,CAAuB,UAAvB,MAAuC,MAA9C,CAH2B,CAK3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD","sourcesContent":["import axios from \"axios\";\nimport { isValid } from \"./API\";\n\nconst backendURL = \"http://localhost:8080/api\";\n\nlet userinfo = {};\n\nexport async function logoutUser() {\n  console.log(\"LOGOUT CALLED\");\n  sessionStorage.setItem(\"LoggedIn\", \"false\");\n  axios\n    .get(backendURL + \"/logout\", { withCredentials: true })\n    .then((response) => {\n      userinfo = {};\n      console.log(response);\n    });\n}\n\nexport function getUserDetails(callback) {\n  if (isLoggedIn()) {\n    //localStorage.setItem(\"LoggedIn\", true);\n    callback(userinfo);\n    return;\n  }\n  console.log(\"OOF\");\n  axios\n    .get(backendURL + \"/userinfo\", { withCredentials: true })\n    .then((response) => {\n      if (!isValid(response)) logoutUser();\n      else {\n        sessionStorage.setItem(\"LoggedIn\", \"true\");\n        userinfo = response.data;\n        console.log(\"MADE A SUCCESSFUL LOGIN\");\n      }\n\n      callback(userinfo);\n    });\n}\n\nexport function isLoggedIn() {\n  //return false;\n  console.log(sessionStorage.getItem(\"LoggedIn\"));\n  return sessionStorage.getItem(\"LoggedIn\") === \"true\";\n\n  // axios\n  //   .get(backendURL + \"/loggedinstatus\", { withCredentials: true })\n  //   .then((promise) => {\n  //     console.log(promise);\n  //     if (promise.data === \"x\") callback(1);\n  //     else callback(2);\n  //   })\n  //   .catch((Error) => {\n  //     console.log(Error);\n  //   });\n  // //return loggedInStatus;\n}\n"]},"metadata":{},"sourceType":"module"}