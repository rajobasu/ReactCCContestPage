{"ast":null,"code":"import axios from \"axios\";\nimport { isValid } from \"./API\";\nconst backendURL = \"http://localhost:8080/api\";\nlet userinfo = {\n  username: undefined\n};\nexport async function logoutUser() {\n  axios.get(backendURL + \"/logout\", {\n    withCredentials: true\n  }).then(response => {\n    localStorage.setItem(\"LoggedIn\", false);\n    userinfo.username = \"\";\n    console.log(response);\n  });\n}\nexport function getUserDetails(callback) {\n  if (isLoggedIn()) {\n    //localStorage.setItem(\"LoggedIn\", true);\n    callback(userinfo.username);\n    return;\n  }\n\n  console.log(\"OOF\");\n  axios.get(backendURL + \"/userinfo\", {\n    withCredentials: true\n  }).then(response => {\n    if (!isValid(response)) userinfo.username = \"\";else userinfo.username = response.data.username;\n    console.log(\"WOW\");\n    console.log();\n    console.log(userinfo.username);\n    localStorage.setItem(\"LoggedIn\", true);\n    callback(userinfo.username);\n  });\n}\nexport function isLoggedIn() {\n  return localStorage.getItem(\"LoggedIn\"); // axios\n  //   .get(backendURL + \"/loggedinstatus\", { withCredentials: true })\n  //   .then((promise) => {\n  //     console.log(promise);\n  //     if (promise.data === \"x\") callback(1);\n  //     else callback(2);\n  //   })\n  //   .catch((Error) => {\n  //     console.log(Error);\n  //   });\n  // //return loggedInStatus;\n}","map":{"version":3,"sources":["/Users/rajobasu/Desktop/react_tut/src/APICalls/LoginHandler.js"],"names":["axios","isValid","backendURL","userinfo","username","undefined","logoutUser","get","withCredentials","then","response","localStorage","setItem","console","log","getUserDetails","callback","isLoggedIn","data","getItem"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,OAAxB;AAEA,MAAMC,UAAU,GAAG,2BAAnB;AAEA,IAAIC,QAAQ,GAAG;AAAEC,EAAAA,QAAQ,EAAEC;AAAZ,CAAf;AAEA,OAAO,eAAeC,UAAf,GAA4B;AACjCN,EAAAA,KAAK,CACFO,GADH,CACOL,UAAU,GAAG,SADpB,EAC+B;AAAEM,IAAAA,eAAe,EAAE;AAAnB,GAD/B,EAEGC,IAFH,CAESC,QAAD,IAAc;AAClBC,IAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiC,KAAjC;AACAT,IAAAA,QAAQ,CAACC,QAAT,GAAoB,EAApB;AACAS,IAAAA,OAAO,CAACC,GAAR,CAAYJ,QAAZ;AACD,GANH;AAOD;AAED,OAAO,SAASK,cAAT,CAAwBC,QAAxB,EAAkC;AACvC,MAAIC,UAAU,EAAd,EAAkB;AAChB;AACAD,IAAAA,QAAQ,CAACb,QAAQ,CAACC,QAAV,CAAR;AACA;AACD;;AACDS,EAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACAd,EAAAA,KAAK,CACFO,GADH,CACOL,UAAU,GAAG,WADpB,EACiC;AAAEM,IAAAA,eAAe,EAAE;AAAnB,GADjC,EAEGC,IAFH,CAESC,QAAD,IAAc;AAClB,QAAI,CAACT,OAAO,CAACS,QAAD,CAAZ,EAAwBP,QAAQ,CAACC,QAAT,GAAoB,EAApB,CAAxB,KACKD,QAAQ,CAACC,QAAT,GAAoBM,QAAQ,CAACQ,IAAT,CAAcd,QAAlC;AACLS,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAYX,QAAQ,CAACC,QAArB;AACAO,IAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiC,IAAjC;AACAI,IAAAA,QAAQ,CAACb,QAAQ,CAACC,QAAV,CAAR;AACD,GAVH;AAWD;AAED,OAAO,SAASa,UAAT,GAAsB;AAC3B,SAAON,YAAY,CAACQ,OAAb,CAAqB,UAArB,CAAP,CAD2B,CAG3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD","sourcesContent":["import axios from \"axios\";\nimport { isValid } from \"./API\";\n\nconst backendURL = \"http://localhost:8080/api\";\n\nlet userinfo = { username: undefined };\n\nexport async function logoutUser() {\n  axios\n    .get(backendURL + \"/logout\", { withCredentials: true })\n    .then((response) => {\n      localStorage.setItem(\"LoggedIn\", false);\n      userinfo.username = \"\";\n      console.log(response);\n    });\n}\n\nexport function getUserDetails(callback) {\n  if (isLoggedIn()) {\n    //localStorage.setItem(\"LoggedIn\", true);\n    callback(userinfo.username);\n    return;\n  }\n  console.log(\"OOF\");\n  axios\n    .get(backendURL + \"/userinfo\", { withCredentials: true })\n    .then((response) => {\n      if (!isValid(response)) userinfo.username = \"\";\n      else userinfo.username = response.data.username;\n      console.log(\"WOW\");\n      console.log();\n      console.log(userinfo.username);\n      localStorage.setItem(\"LoggedIn\", true);\n      callback(userinfo.username);\n    });\n}\n\nexport function isLoggedIn() {\n  return localStorage.getItem(\"LoggedIn\");\n\n  // axios\n  //   .get(backendURL + \"/loggedinstatus\", { withCredentials: true })\n  //   .then((promise) => {\n  //     console.log(promise);\n  //     if (promise.data === \"x\") callback(1);\n  //     else callback(2);\n  //   })\n  //   .catch((Error) => {\n  //     console.log(Error);\n  //   });\n  // //return loggedInStatus;\n}\n"]},"metadata":{},"sourceType":"module"}